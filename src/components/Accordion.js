import React, { useState, useRef, useEffect } from "react";
import "./Accordion.scss";

function Accordion(props) {

    const stagger = .75;
    const [active, setActive] = useState("");
    const [height, setHeight] = useState("0px");
    const [scrollbar, setScrollbar] = useState("");
    const content = useRef(null);

    function toggleAccordion() {
        setActive(active === "" ? "active" : "");
        setHeight(active === "active" ? "0px" : `${content.current.scrollHeight}px`);

        // if (active === "active") updateAccordion();
    }

    // function updateAccordion() {
    //     // setHeight(active === "active" ? "0px" : `${content.current.scrollHeight}px`);
    //     setHeight(`${content.current.scrollHeight}px`);
    // }

    function check() {
        setScrollbar("opened");
        // console.log(content.current.scrollHeight);
        // if (active === "active") {
        //     setHeight(`${content.current.scrollHeight}px`)
        //     console.log("height: " + height);
        // }
    }

    useEffect(() => {
        // updateAccordion();
        window.addEventListener("resize", check);
        return () => window.removeEventListener("resize", check);
        // console.log(content.content.scrollHeight);
    }, []);

    return (
        <div className="accHead">
            <h1 className="title" style={{ animationDelay: stagger * props.id + "s" }}>
                {props.start}
                <span className="darkLetters">{props.end}</span><span className="noSel">&nbsp;&nbsp;</span>
                <span><button>
                    <svg width=".7em" height=".7em" viewBox="0 0 96 97" version="1.1" className={`shadow ${active}`} onClick={toggleAccordion} style={{ animationDelay: (stagger * props.id) + "s" }}>
                        <g id="Group">
                            <path d="M9.999 0L86.001 0Q86.2465 0 86.4916 0.0120442Q86.7368 0.0240885 86.9811 0.0481479Q87.2253 0.0722074 87.4681 0.108224Q87.711 0.144241 87.9517 0.192128Q88.1924 0.240015 88.4305 0.299657Q88.6687 0.3593 88.9035 0.430553Q89.1384 0.501807 89.3696 0.584501Q89.6007 0.667194 89.8274 0.761128Q90.0542 0.855062 90.2761 0.960011Q90.498 1.06496 90.7145 1.18067Q90.931 1.29638 91.1415 1.42257Q91.352 1.54876 91.5561 1.68514Q91.7602 1.82151 91.9574 1.96773Q92.1545 2.11395 92.3443 2.26967Q92.534 2.42539 92.7159 2.59023Q92.8978 2.75507 93.0714 2.92864Q93.2449 3.10221 93.4098 3.28408Q93.5746 3.46596 93.7303 3.6557Q93.886 3.84545 94.0323 4.0426Q94.1785 4.23976 94.3149 4.44385Q94.4512 4.64795 94.5774 4.85849Q94.7036 5.06903 94.8193 5.2855Q94.935 5.50198 95.04 5.72388Q95.1449 5.94577 95.2389 6.17255Q95.3328 6.39932 95.4155 6.63044Q95.4982 6.86155 95.5694 7.09644Q95.6407 7.33134 95.7003 7.56944Q95.76 7.80755 95.8079 8.04829Q95.8557 8.28904 95.8918 8.53184Q95.9278 8.77465 95.9519 9.01893Q95.9759 9.26321 95.988 9.50837Q96 9.75354 96 9.999L96 14.001Q96 14.2465 95.988 14.4916Q95.9759 14.7368 95.9519 14.9811Q95.9278 15.2254 95.8918 15.4682Q95.8557 15.711 95.8079 15.9517Q95.76 16.1925 95.7003 16.4306Q95.6407 16.6687 95.5694 16.9036Q95.4982 17.1384 95.4155 17.3696Q95.3328 17.6007 95.2389 17.8274Q95.1449 18.0542 95.04 18.2761Q94.935 18.498 94.8193 18.7145Q94.7036 18.931 94.5774 19.1415Q94.4512 19.352 94.3148 19.5561Q94.1785 19.7602 94.0323 19.9574Q93.886 20.1546 93.7303 20.3443Q93.5746 20.534 93.4098 20.7159Q93.2449 20.8978 93.0714 21.0714Q92.8978 21.2449 92.7159 21.4098Q92.534 21.5746 92.3443 21.7303Q92.1545 21.886 91.9574 22.0323Q91.7602 22.1785 91.5561 22.3149Q91.352 22.4512 91.1415 22.5774Q90.931 22.7036 90.7145 22.8193Q90.498 22.935 90.2761 23.04Q90.0542 23.1449 89.8274 23.2389Q89.6007 23.3328 89.3696 23.4155Q89.1384 23.4982 88.9035 23.5694Q88.6686 23.6407 88.4305 23.7003Q88.1924 23.76 87.9517 23.8079Q87.711 23.8558 87.4681 23.8918Q87.2253 23.9278 86.9811 23.9519Q86.7368 23.9759 86.4916 23.988Q86.2465 24 86.001 24L9.999 24Q9.75354 24 9.50837 23.988Q9.26321 23.9759 9.01893 23.9519Q8.77465 23.9278 8.53184 23.8918Q8.28904 23.8558 8.04829 23.8079Q7.80755 23.76 7.56944 23.7003Q7.33134 23.6407 7.09644 23.5694Q6.86155 23.4982 6.63044 23.4155Q6.39932 23.3328 6.17255 23.2389Q5.94577 23.1449 5.72388 23.04Q5.50198 22.935 5.2855 22.8193Q5.06903 22.7036 4.85849 22.5774Q4.64795 22.4512 4.44385 22.3149Q4.23976 22.1785 4.0426 22.0323Q3.84545 21.886 3.6557 21.7303Q3.46596 21.5746 3.28408 21.4098Q3.10221 21.2449 2.92864 21.0714Q2.75507 20.8978 2.59023 20.7159Q2.42539 20.534 2.26967 20.3443Q2.11395 20.1546 1.96773 19.9574Q1.82151 19.7602 1.68514 19.5561Q1.54876 19.352 1.42257 19.1415Q1.29638 18.931 1.18067 18.7145Q1.06496 18.498 0.960011 18.2761Q0.855062 18.0542 0.761128 17.8274Q0.667194 17.6007 0.584501 17.3696Q0.501807 17.1384 0.430553 16.9036Q0.3593 16.6687 0.299657 16.4306Q0.240015 16.1925 0.192128 15.9517Q0.144241 15.711 0.108224 15.4682Q0.0722074 15.2254 0.0481479 14.9811Q0.0240885 14.7368 0.0120442 14.4916Q0 14.2465 0 14.001L0 9.999Q0 9.75354 0.0120442 9.50837Q0.0240885 9.26321 0.0481479 9.01893Q0.0722074 8.77465 0.108224 8.53184Q0.144241 8.28904 0.192128 8.04829Q0.240015 7.80755 0.299657 7.56944Q0.3593 7.33134 0.430553 7.09644Q0.501807 6.86155 0.584501 6.63044Q0.667194 6.39932 0.761128 6.17255Q0.855062 5.94577 0.960011 5.72388Q1.06496 5.50198 1.18067 5.2855Q1.29638 5.06903 1.42257 4.85849Q1.54876 4.64795 1.68514 4.44385Q1.82151 4.23976 1.96773 4.0426Q2.11395 3.84545 2.26967 3.6557Q2.42539 3.46596 2.59023 3.28408Q2.75507 3.10221 2.92864 2.92864Q3.10221 2.75507 3.28408 2.59023Q3.46596 2.42539 3.6557 2.26967Q3.84545 2.11395 4.0426 1.96773Q4.23976 1.82151 4.44385 1.68514Q4.64795 1.54876 4.85849 1.42257Q5.06903 1.29638 5.2855 1.18067Q5.50198 1.06496 5.72388 0.960011Q5.94577 0.855062 6.17255 0.761128Q6.39932 0.667194 6.63044 0.584501Q6.86155 0.501807 7.09644 0.430553Q7.33134 0.3593 7.56944 0.299657Q7.80755 0.240015 8.04829 0.192128Q8.28904 0.144241 8.53184 0.108224Q8.77465 0.0722074 9.01893 0.0481479Q9.26321 0.0240885 9.50837 0.0120442Q9.75354 0 9.999 0L9.999 0Z" transform="translate(0 36)" id="Rectangle" fillRule="evenodd" stroke="none" />
                            <path d="M9.999 0L86.001 0Q86.2465 0 86.4916 0.0120442Q86.7368 0.0240885 86.9811 0.0481479Q87.2253 0.0722074 87.4681 0.108224Q87.711 0.144241 87.9517 0.192128Q88.1924 0.240015 88.4305 0.299657Q88.6687 0.3593 88.9035 0.430553Q89.1384 0.501807 89.3696 0.584501Q89.6007 0.667194 89.8274 0.761128Q90.0542 0.855062 90.2761 0.960011Q90.498 1.06496 90.7145 1.18067Q90.931 1.29638 91.1415 1.42257Q91.352 1.54876 91.5561 1.68514Q91.7602 1.82151 91.9574 1.96773Q92.1545 2.11395 92.3443 2.26967Q92.534 2.42539 92.7159 2.59023Q92.8978 2.75507 93.0714 2.92864Q93.2449 3.10221 93.4098 3.28408Q93.5746 3.46596 93.7303 3.6557Q93.886 3.84545 94.0323 4.0426Q94.1785 4.23976 94.3149 4.44385Q94.4512 4.64795 94.5774 4.85849Q94.7036 5.06903 94.8193 5.2855Q94.935 5.50198 95.04 5.72388Q95.1449 5.94577 95.2389 6.17255Q95.3328 6.39932 95.4155 6.63044Q95.4982 6.86155 95.5694 7.09644Q95.6407 7.33134 95.7003 7.56944Q95.76 7.80755 95.8079 8.04829Q95.8557 8.28904 95.8918 8.53184Q95.9278 8.77465 95.9519 9.01893Q95.9759 9.26321 95.988 9.50837Q96 9.75354 96 9.999L96 14.001Q96 14.2465 95.988 14.4916Q95.9759 14.7368 95.9519 14.9811Q95.9278 15.2254 95.8918 15.4682Q95.8557 15.711 95.8079 15.9517Q95.76 16.1925 95.7003 16.4306Q95.6407 16.6687 95.5694 16.9036Q95.4982 17.1384 95.4155 17.3696Q95.3328 17.6007 95.2389 17.8274Q95.1449 18.0542 95.04 18.2761Q94.935 18.498 94.8193 18.7145Q94.7036 18.931 94.5774 19.1415Q94.4512 19.352 94.3148 19.5561Q94.1785 19.7602 94.0323 19.9574Q93.886 20.1546 93.7303 20.3443Q93.5746 20.534 93.4098 20.7159Q93.2449 20.8978 93.0714 21.0714Q92.8978 21.2449 92.7159 21.4098Q92.534 21.5746 92.3443 21.7303Q92.1545 21.886 91.9574 22.0323Q91.7602 22.1785 91.5561 22.3149Q91.352 22.4512 91.1415 22.5774Q90.931 22.7036 90.7145 22.8193Q90.498 22.935 90.2761 23.04Q90.0542 23.1449 89.8274 23.2389Q89.6007 23.3328 89.3696 23.4155Q89.1384 23.4982 88.9035 23.5694Q88.6686 23.6407 88.4305 23.7003Q88.1924 23.76 87.9517 23.8079Q87.711 23.8558 87.4681 23.8918Q87.2253 23.9278 86.9811 23.9519Q86.7368 23.9759 86.4916 23.988Q86.2465 24 86.001 24L9.999 24Q9.75354 24 9.50837 23.988Q9.26321 23.9759 9.01893 23.9519Q8.77465 23.9278 8.53184 23.8918Q8.28904 23.8558 8.04829 23.8079Q7.80755 23.76 7.56944 23.7003Q7.33134 23.6407 7.09644 23.5694Q6.86155 23.4982 6.63044 23.4155Q6.39932 23.3328 6.17255 23.2389Q5.94577 23.1449 5.72388 23.04Q5.50198 22.935 5.2855 22.8193Q5.06903 22.7036 4.85849 22.5774Q4.64795 22.4512 4.44385 22.3149Q4.23976 22.1785 4.0426 22.0323Q3.84545 21.886 3.6557 21.7303Q3.46596 21.5746 3.28408 21.4098Q3.10221 21.2449 2.92864 21.0714Q2.75507 20.8978 2.59023 20.7159Q2.42539 20.534 2.26967 20.3443Q2.11395 20.1546 1.96773 19.9574Q1.82151 19.7602 1.68514 19.5561Q1.54876 19.352 1.42257 19.1415Q1.29638 18.931 1.18067 18.7145Q1.06496 18.498 0.960011 18.2761Q0.855062 18.0542 0.761128 17.8274Q0.667194 17.6007 0.584501 17.3696Q0.501807 17.1384 0.430553 16.9036Q0.3593 16.6687 0.299657 16.4306Q0.240015 16.1925 0.192128 15.9517Q0.144241 15.711 0.108224 15.4682Q0.0722074 15.2254 0.0481479 14.9811Q0.0240885 14.7368 0.0120442 14.4916Q0 14.2465 0 14.001L0 9.999Q0 9.75354 0.0120442 9.50837Q0.0240885 9.26321 0.0481479 9.01893Q0.0722074 8.77465 0.108224 8.53184Q0.144241 8.28904 0.192128 8.04829Q0.240015 7.80755 0.299657 7.56944Q0.3593 7.33134 0.430553 7.09644Q0.501807 6.86155 0.584501 6.63044Q0.667194 6.39932 0.761128 6.17255Q0.855062 5.94577 0.960011 5.72388Q1.06496 5.50198 1.18067 5.2855Q1.29638 5.06903 1.42257 4.85849Q1.54876 4.64795 1.68514 4.44385Q1.82151 4.23976 1.96773 4.0426Q2.11395 3.84545 2.26967 3.6557Q2.42539 3.46596 2.59023 3.28408Q2.75507 3.10221 2.92864 2.92864Q3.10221 2.75507 3.28408 2.59023Q3.46596 2.42539 3.6557 2.26967Q3.84545 2.11395 4.0426 1.96773Q4.23976 1.82151 4.44385 1.68514Q4.64795 1.54876 4.85849 1.42257Q5.06903 1.29638 5.2855 1.18067Q5.50198 1.06496 5.72388 0.960011Q5.94577 0.855062 6.17255 0.761128Q6.39932 0.667194 6.63044 0.584501Q6.86155 0.501807 7.09644 0.430553Q7.33134 0.3593 7.56944 0.299657Q7.80755 0.240015 8.04829 0.192128Q8.28904 0.144241 8.53184 0.108224Q8.77465 0.0722074 9.01893 0.0481479Q9.26321 0.0240885 9.50837 0.0120442Q9.75354 0 9.999 0L9.999 0Z" transform="matrix(1.2675908E-06 1 -1 1.2675908E-06 59.99994 0)" id="Rectangle-Copy" fillRule="evenodd" stroke="none" />
                        </g>
                    </svg>
                </button></span>
            </h1>
            <div ref={content} className={`content ${scrollbar}`} style={{ maxHeight: `${height}` }}>
                {/* <div ref={content} className="content" style={{ maxHeight: `${height}` }}> */}
                <p className="para">
                    {props.content}
                </p>
            </div>
        </div>
    );
}

export default Accordion;
